@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html,
  body,
  #root {
    @apply h-full;
  }

  body {
    @apply font-sans text-gray-900 overflow-hidden antialiased;
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full;
  }
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400;
  }
}

@layer components {
  .btn-primary {
    @apply inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-indigo-600 to-indigo-700 px-6 py-3 text-sm font-semibold text-white shadow-md transition-all duration-200 hover:from-indigo-700 hover:to-indigo-800 hover:shadow-lg hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0;
  }

  .btn-secondary {
    @apply inline-flex items-center justify-center rounded-xl border border-gray-200 bg-white px-6 py-3 text-sm font-semibold text-gray-700 shadow-sm transition-all duration-200 hover:bg-gray-50 hover:border-gray-300 hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  .btn-danger {
    @apply inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-red-600 to-red-700 px-6 py-3 text-sm font-semibold text-white shadow-md shadow-red-200/50 transition-all duration-200 hover:from-red-700 hover:to-red-800 hover:shadow-lg hover:shadow-red-300/50 hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2;
  }

  .btn-success {
    @apply inline-flex items-center justify-center rounded-xl bg-gradient-to-r from-emerald-600 to-emerald-700 px-6 py-3 text-sm font-semibold text-white shadow-md shadow-emerald-200/50 transition-all duration-200 hover:from-emerald-700 hover:to-emerald-800 hover:shadow-lg hover:shadow-emerald-300/50 hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2;
  }

  .card {
    @apply rounded-2xl border border-gray-100 bg-white p-6 shadow-sm ring-1 ring-gray-900/5 transition-shadow duration-200;
  }

  .card-hover {
    @apply card hover:shadow-md hover:ring-gray-900/10;
  }

  .input {
    @apply block w-full rounded-xl border border-gray-200 bg-gray-50/50 px-4 py-3 text-sm placeholder-gray-400 shadow-sm transition-all duration-200 focus:border-indigo-500 focus:bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500/20;
  }

  .label {
    @apply block text-sm font-medium text-gray-700 mb-1.5;
  }

  .stat-card {
    @apply rounded-2xl border border-gray-100 bg-white p-5 shadow-sm ring-1 ring-gray-900/5 flex flex-col items-center justify-center gap-1.5 text-center transition-all duration-200 hover:shadow-md hover:-translate-y-0.5;
  }

  .badge {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold tracking-wide;
  }

  .badge-success {
    @apply badge bg-emerald-50 text-emerald-700 ring-1 ring-emerald-600/20;
  }

  .badge-warning {
    @apply badge bg-amber-50 text-amber-700 ring-1 ring-amber-600/20;
  }

  .badge-danger {
    @apply badge bg-red-50 text-red-700 ring-1 ring-red-600/20;
  }

  .badge-neutral {
    @apply badge bg-gray-50 text-gray-600 ring-1 ring-gray-500/20;
  }

  /* Glass effect */
  .glass {
    @apply bg-white/80 backdrop-blur-xl;
  }

  /* Animated gradient background */
  .gradient-bg {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  /* Table styles */
  .table-header {
    @apply py-3.5 px-4 text-left text-xs font-semibold uppercase tracking-wider text-gray-500;
  }

  .table-cell {
    @apply py-3.5 px-4 text-sm;
  }
}

/* Fade-in animation */
@keyframes fade-in {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-fade-in {
  animation: fade-in 0.4s ease-out;
}

/* Slide-up animation */
@keyframes slide-up {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-slide-up {
  animation: slide-up 0.5s ease-out;
}

/* Staggered children animation */
.stagger > * {
  animation: fade-in 0.3s ease-out both;
}
.stagger > *:nth-child(1) { animation-delay: 0ms; }
.stagger > *:nth-child(2) { animation-delay: 60ms; }
.stagger > *:nth-child(3) { animation-delay: 120ms; }
.stagger > *:nth-child(4) { animation-delay: 180ms; }
.stagger > *:nth-child(5) { animation-delay: 240ms; }

/* Theme variables and presets */
:root {
  --bg: #f8fafc;
  --card-bg: #ffffff;
  --text: #0f172a;
  --muted: #6b7280;
  --border: rgba(15,23,42,0.06);
  --input-bg: rgba(243,244,246,0.8);
  --primary-600: #4f46e5;
  --primary-700: #4338ca;
}


[data-theme="light"] {
  --bg: #f8fafc;
  --card-bg: #ffffff;
  --text: #0f172a;
  --muted: #6b7280;
  --border: rgba(15,23,42,0.06);
  --input-bg: rgba(243,244,246,0.6);
  --primary-600: #4f46e5;
  --primary-700: #4338ca;
  --glass-bg: rgba(255,255,255,0.8);
}

[data-theme="dark"] {
  --bg: #0a0a0f;
  --card-bg: #13131a;
  --text: #f1f1f4;
  --muted: #8b8fa3;
  --border: rgba(255,255,255,0.08);
  --input-bg: rgba(255,255,255,0.05);
  --primary-600: #818cf8;
  --primary-700: #6366f1;
  --glass-bg: rgba(19,19,26,0.85);
  --icon-bg-indigo: rgba(99,102,241,0.15);
  --icon-bg-emerald: rgba(16,185,129,0.15);
  --icon-bg-rose: rgba(244,63,94,0.15);
  --icon-bg-cyan: rgba(6,182,212,0.15);
  --icon-bg-amber: rgba(245,158,11,0.15);
  --shadow-color: transparent;
}

/* Apply the theme variables to base elements */
html, body, #root {
  background-color: var(--bg) !important;
  color: var(--text) !important;
}

.card {
  background-color: var(--card-bg) !important;
  border-color: var(--border) !important;
}

.input {
  background-color: var(--input-bg) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

.label { color: var(--muted) !important; }

.glass { background-color: var(--glass-bg) !important; backdrop-filter: blur(8px); }

/* App root helper so layout containers don't override theme */
.app-root { background-color: var(--bg) !important; color: var(--text) !important; }

/* Dark-mode fixes: map common Tailwind gray text/background utilities to theme variables inside app-root */
.app-root .text-gray-900,
.app-root .text-gray-800,
.app-root .text-gray-700 {
  color: var(--text) !important;
}

.app-root .text-gray-600,
.app-root .text-gray-500,
.app-root .text-gray-400 {
  color: var(--muted) !important;
}

/* Ensure explicit white backgrounds adapt in dark mode */
.app-root .bg-white {
  background-color: var(--card-bg) !important;
}

/* Dark mode: neutralize colored light-mode shadows */
[data-theme="dark"] .app-root .shadow-sm,
[data-theme="dark"] .app-root .shadow-md,
[data-theme="dark"] .app-root .shadow-lg,
[data-theme="dark"] .app-root .shadow-xl {
  --tw-shadow-color: transparent !important;
}
[data-theme="dark"] .shadow-indigo-200\/50,
[data-theme="dark"] .shadow-indigo-300\/50,
[data-theme="dark"] .shadow-emerald-200\/50,
[data-theme="dark"] .shadow-emerald-300\/50,
[data-theme="dark"] .shadow-red-200\/50,
[data-theme="dark"] .shadow-red-300\/50,
[data-theme="dark"] .shadow-amber-200\/50,
[data-theme="dark"] .shadow-amber-300\/50,
[data-theme="dark"] .shadow-primary-200\/50,
[data-theme="dark"] .shadow-primary-300\/50,
[data-theme="dark"] .shadow-gray-200\/50 {
  --tw-shadow-color: transparent !important;
}

/* Dark mode: adapt light-only icon backgrounds */
[data-theme="dark"] .app-root .bg-indigo-50 { background-color: rgba(99,102,241,0.15) !important; }
[data-theme="dark"] .app-root .bg-emerald-50 { background-color: rgba(16,185,129,0.15) !important; }
[data-theme="dark"] .app-root .bg-rose-50 { background-color: rgba(244,63,94,0.15) !important; }
[data-theme="dark"] .app-root .bg-cyan-50 { background-color: rgba(6,182,212,0.15) !important; }
[data-theme="dark"] .app-root .bg-amber-50 { background-color: rgba(245,158,11,0.15) !important; }
[data-theme="dark"] .app-root .bg-red-50 { background-color: rgba(239,68,68,0.12) !important; }
[data-theme="dark"] .app-root .bg-violet-50 { background-color: rgba(139,92,246,0.15) !important; }
[data-theme="dark"] .app-root .bg-orange-50 { background-color: rgba(249,115,22,0.15) !important; }

/* Dark mode: gradient backgrounds that look white in dark */
[data-theme="dark"] .app-root [class*="from-primary-50"],
[data-theme="dark"] .app-root [class*="from-indigo-50"],
[data-theme="dark"] .app-root [class*="from-emerald-50"],
[data-theme="dark"] .app-root [class*="from-red-50"],
[data-theme="dark"] .app-root [class*="from-amber-50"],
[data-theme="dark"] .app-root [class*="from-orange-50"] {
  --tw-gradient-from: transparent !important;
  --tw-gradient-to: transparent !important;
}

/* Dark mode: borders */
[data-theme="dark"] .app-root .border-gray-100,
[data-theme="dark"] .app-root .border-gray-200,
[data-theme="dark"] .app-root .border-gray-200\/60,
[data-theme="dark"] .app-root .border-gray-50,
[data-theme="dark"] .app-root .border-gray-50\/80 {
  border-color: var(--border) !important;
}

/* Dark mode: hover backgrounds */
[data-theme="dark"] .app-root .hover\:bg-gray-50:hover {
  background-color: rgba(255,255,255,0.05) !important;
}
[data-theme="dark"] .app-root .hover\:bg-gray-50\/50:hover,
[data-theme="dark"] .app-root .bg-gray-50\/50 {
  background-color: rgba(255,255,255,0.03) !important;
}
[data-theme="dark"] .app-root .bg-gray-100 {
  background-color: rgba(255,255,255,0.08) !important;
}
[data-theme="dark"] .app-root .bg-gray-50 {
  background-color: rgba(255,255,255,0.05) !important;
}

/* Dark mode: ring colors */
[data-theme="dark"] .app-root .ring-gray-900\/5 {
  --tw-ring-color: rgba(255,255,255,0.06) !important;
}
[data-theme="dark"] .app-root .ring-1 {
  --tw-ring-color: rgba(255,255,255,0.08) !important;
}

/* Dark mode: text that stays dark (gray-300 used for placeholder) */
[data-theme="dark"] .app-root .text-gray-300 {
  color: #4b5563 !important;
}

/* Dark mode: badges need readable colors */
[data-theme="dark"] .badge-success { background-color: rgba(16,185,129,0.15) !important; color: #6ee7b7 !important; }
[data-theme="dark"] .badge-warning { background-color: rgba(245,158,11,0.15) !important; color: #fcd34d !important; }
[data-theme="dark"] .badge-danger { background-color: rgba(239,68,68,0.15) !important; color: #fca5a5 !important; }
[data-theme="dark"] .badge-neutral { background-color: rgba(255,255,255,0.08) !important; color: #d1d5db !important; }

/* Dark mode: decorative blurred circles */
[data-theme="dark"] .app-root [class*="blur-2xl"],
[data-theme="dark"] .app-root [class*="blur-3xl"] {
  opacity: 0.15 !important;
}

/* Dark mode: scrollbar */
[data-theme="dark"] ::-webkit-scrollbar-thumb {
  background-color: #333 !important;
}
[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
  background-color: #555 !important;
}

/* Ensure table headers/cells use theme colors */
.app-root .table-header { color: var(--muted) !important; }
.app-root .table-cell { color: var(--text) !important; }

/* Stat card theme adjustments */
.stat-icon-bg { background-color: var(--card-bg) !important; }
.stat-value { color: var(--text) !important; }
.stat-label { color: var(--muted) !important; }

/* Primary color helpers for inline styles that use primary via CSS variables */
.primary-bg { background-image: linear-gradient(90deg, var(--primary-600), var(--primary-700)); }
.primary { color: var(--primary-600); }

/* Individual stagger animation classes */
.stagger-1 { animation: fade-in 0.3s ease-out 0ms both; }
.stagger-2 { animation: fade-in 0.3s ease-out 60ms both; }
.stagger-3 { animation: fade-in 0.3s ease-out 120ms both; }
.stagger-4 { animation: fade-in 0.3s ease-out 180ms both; }
.stagger-5 { animation: fade-in 0.3s ease-out 240ms both; }

/* Chart container helpers */
.chart-canvas {
  position: relative;
  border-radius: 12px;
  padding: 8px;
  background-color: transparent;
}
